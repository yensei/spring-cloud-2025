server:
  port: 8090

spring:
  application:
    name: gateway-server
  config:
    import: "optional:configserver:http://config-server:8888"
  cloud:
    gateway:
      discovery:
        locator:
          enabled: true # Habilita el enrutamiento automático basado en el serviceId de Eureka
          lower-case-service-id: true # Convierte los serviceId a minúsculas
      routes:
        - id: mcs-customers-route
          # uri 'lb://' indica que se usará el balanceador de carga de Spring Cloud (integrado con Eureka)
          # para encontrar una instancia del servicio 'mcs-customers'.
          uri: lb://mcs-customers
          predicates:
            # Esta ruta se activa si la petición empieza con /api/customers/
            - Path=/api/customers/**
          filters:
             # Reescribe la ruta: /api/customers/1 -> /mcs-customers/customers/1
            - RewritePath=/api/(?<segment>.*), /mcs-customers/${segment}

        - id: mcs-orders-route
          uri: lb://mcs-orders
          predicates:
            # Esta ruta se activa si la petición empieza con /api/orders/**
            - Path=/api/orders/**
          filters:
            # Reescribe la ruta: /api/orders/1 -> /mcs-orders/orders/1
            - RewritePath=/api/(?<segment>.*), /mcs-orders/${segment}
